!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("antd"),require("react"),require("lodash"),require("moment"),require("@ant-design/icons"),require("styled-components"),require("@gui/dynamic-form")):"function"==typeof define&&define.amd?define("ANTD_BASE_MODULE",["antd","react","lodash","moment","@ant-design/icons","styled-components","@gui/dynamic-form"],t):"object"==typeof exports?exports.ANTD_BASE_MODULE=t(require("antd"),require("react"),require("lodash"),require("moment"),require("@ant-design/icons"),require("styled-components"),require("@gui/dynamic-form")):e.ANTD_BASE_MODULE=t(e.Antd,e.React,e._,e.moment,e["@ant-design/icons"],e["styled-components"],e["@gui/dynamic-form"])}(this,function(n,r,a,l,i,o,u){return f={},c.m=s=[function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";var V=this&&this.__assign||function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var R=l(n(1)),I=n(2),U=l(n(4)),Y=n(0),L=n(5),X=i(n(6)),G=n(7),H=n(9);function K(e){var t=e.t,s=e.params,f=e.handleParam;return R.default.createElement(G.FiltersReview,null,R.default.createElement("span",{className:"label mr-5"},R.default.createElement(L.FilterOutlined,{className:"mr-5"}),t("common:filter_conditions"),t("common:colon")),Object.keys(s).map(function(e){var t,n,r,a,l,i,o,u,c;return null!==(t=s[e])&&void 0!==t&&t.label?R.default.createElement("span",{className:"tag-item",key:e},R.default.createElement("span",{onClick:function(){return f(e)}},null!==(r=null===(n=s[e])||void 0===n?void 0:n.label)&&void 0!==r?r:e,": ",R.default.createElement("span",{className:"val"},(a=s[e],i=a.val,o=a.moreOptions,u=a.options,c=a.type,null!=u&&u.length&&"select"===c?(null===(l=u.find(function(e){return e.value===i}))||void 0===l?void 0:l.label)||i:I.isString(i)||I.isNumber(i)?i:I.isArray(i)?I.every(i,U.isMoment)?i.map(function(e){return e.format((null==o?void 0:o.format)||"YYYY-MM-DD")}).join("/"):i.join("/"):"---"))),R.default.createElement(L.CloseOutlined,{className:"item-icon",onClick:function(){return f(e,!0)}})):null}),R.default.createElement(Y.Button,{size:"small",className:"fz-12",type:"dashed",onClick:function(){return f()}},t("common:reset")))}t.default=function(e){var t,n=e.t,r=e.items,l=void 0===r?[]:r,a=e.callbackFn,i=void 0===a?function(){}:a,o=e.extraActions,u=e.extra2Actions,c=e.refreshCallback,s=e.showSeniorSearch,f=e.handleVals,m=e.defaultVal,d=void 0===m?{}:m,p=e.showBatchSearch,b=R.createRef(),v=Object.keys(d).reduce(function(e,t){var n;return I.find(l,["key",t])&&d[t]?V(V({},e),((n={})[t]=d[t],n)):e},{}),y=Y.Form.useForm()[0],h=null===(t=l[0])||void 0===t?void 0:t.key,g=R.useState(h),x=g[0],E=g[1],k=R.useState(V({},v)),O=k[0],_=k[1],j=R.useState(!1),w=j[0],F=j[1],S=R.useState(V({},v)),N=S[0],C=S[1],M=R.useState(!1),P=M[0],B=M[1];R.useEffect(function(){var e,t;C(V({},O));var n,a=Object.assign(O);I.has(a,"date")&&I.every(a.date,U.isMoment)&&a.date&&(n=l.find(function(e){return"date"===e.key}),delete(a=V(V({},a),((e={})[null==n?void 0:n.keys[0]]=U.default(a.date[0]).format("X"),e[null==n?void 0:n.keys[1]]=U.default(a.date[1]).format("X"),e))).date),a=Object.keys(a).reduce(function(e,t){var n,r;return I.isString(a[t])?V(V({},e),((r={})[t]=a[t].trim(),r)):V(V({},e),((n={})[t]=a[t],n))},{});var r=Object.assign(a);f&&(r=f(a)),i(r,null===(t=b.current)||void 0===t?void 0:t.offsetHeight)},[O]);function T(e,t){var n,r,a;if(!e)return E(h),y.setFieldsValue(((n={})[h]=void 0,n)),void _({});E(e),t?(delete(a=Object.assign(O))[e],y.setFieldsValue(((r={})[e]=void 0,r)),_(V({},a))):E(e)}function z(e,t){e&&_(t),F(!1)}var q=R.useMemo(function(){var e=l.find(function(e){return e.key===x});return e?R.default.createElement(H.RenderComp,{t:n,item:V(V({},e),{style:V(V({},e.style),{width:240})})}):null},[x,l,n]),D=R.useMemo(function(){return R.default.createElement(Q,{t:n,visible:w,initialValues:N,items:l,seniorCallbackFn:z})},[l,N,w]),A=R.useMemo(function(){var e=function(l,i){void 0===l&&(l={});var e=Object.keys(l).reduce(function(e,t){var n,r;if(l[t]||0===l[t]){var a=null!==(r=i.find(function(e){return e.key===t}))&&void 0!==r?r:{};return V(V({},e),((n={})[t]=V({val:l[t]},a),n))}return e},{});return!!Object.keys(e).length&&e}(O,l);return e?R.default.createElement(K,{t:n,params:e,handleParam:T}):null},[O,l,n]);return R.default.createElement(G.TopSearch,{ref:b},R.default.createElement("div",{className:"pull-left d-flex"},!!l.length&&R.default.createElement(G.SearchForm,{form:y,onFinish:function(e){if(I.isUndefined(e[x])||""===e[x])return!1;_(V(V({},O),e))},className:"search-form"},1<l.length&&R.default.createElement(Y.Form.Item,null,R.default.createElement(Y.Select,{style:{width:110,fontSize:12},defaultValue:l[0].key,value:x,onChange:function(e){E(e)}},null==l?void 0:l.map(function(e){return R.default.createElement(Y.Select.Option,{key:e.key,value:e.key,className:"fz-12"},e.label)}))),R.default.createElement(Y.Form.Item,{name:x,className:1<l.length?"mult":""},q),R.default.createElement(Y.Form.Item,null,R.default.createElement(Y.Button,{type:"primary",htmlType:"submit",style:{padding:"0 0.8em",marginRight:10}},R.default.createElement(L.SearchOutlined,null)))),R.default.createElement("div",{className:"mb-10 d-flex"},p&&R.default.createElement(Y.Button,{key:"batchSearch",className:"mr-10 fz-12",onClick:function(){return B(!0)}},n("common:search.batch")),o)),R.default.createElement("div",{className:"pull-right mb-10"},c&&R.default.createElement(Y.Tooltip,{key:"refresh",title:n("common:refresh"),className:"mr-10"},R.default.createElement(Y.Button,{className:"mr-10",onClick:c,icon:R.default.createElement(L.RedoOutlined,null)})),u,s&&R.default.createElement(Y.Button,{type:"link",className:"fz-12",onClick:function(){F(!w)}},n("common:search.senior"),R.default.createElement(L.DoubleRightOutlined,null))),A,D,R.default.createElement(X.default,{t:n,visible:P,batchCallbackFn:function(e,t){e&&_(V(V({},O),t)),B(!1)},params:O,filterItems:l.filter(function(e){return e.multiple})}))};var Q=function(e){var t=e.t,n=e.initialValues,r=e.items,a=e.seniorCallbackFn,l=e.visible,i=Y.Form.useForm()[0];return R.useEffect(function(){l&&i.setFieldsValue(n)},[l]),R.default.createElement(Y.Drawer,{title:t("common:search.senior"),visible:l,width:560,onClose:function(){a(!1,{})},footer:R.default.createElement("div",{className:"t-right"},R.default.createElement(Y.Button,{type:"primary",onClick:function(){var t=i.getFieldsValue();a(!0,I.omit(t,Object.keys(t).filter(function(e){return I.isUndefined(t[e])})))},className:"mr-10"},t("common:search.label")),R.default.createElement(Y.Button,{onClick:function(){i.resetFields()}},t("common:reset")))},R.default.createElement(Y.Form,{form:i,layout:"vertical"},R.default.createElement(Y.Row,{gutter:24},r.map(function(e){return R.default.createElement(Y.Col,{key:e.key,lg:12,md:12},R.default.createElement(Y.Form.Item,{name:e.key,label:R.default.createElement("span",null,e.label,e.multiple&&R.default.createElement(Y.Tooltip,{placement:"right",title:R.default.createElement("span",{className:"fz-12"},t("search.senior-tip"))},R.default.createElement(L.QuestionCircleOutlined,{className:"ml-10 fz-12 c-warn"})))},R.default.createElement(H.RenderComp,{t:t,isSeniorForm:!0,item:V(V({},e),{style:{width:"100%"}})})))}))))}},function(e,t){e.exports=l},function(e,t){e.exports=i},function(e,t,n){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(1)),s=n(2),f=n(0);t.default=function(e){var t=e.t,n=e.visible,r=e.batchCallbackFn,a=e.params,l=void 0===a?{}:a,i=e.filterItems,o=f.Form.useForm()[0];return c.useEffect(function(){n&&o.setFieldsValue(i.reduce(function(e,t){var n,r=l[t.key];return s.isUndefined(r)||(r=r.trim().replace(/,/g,"\n")),u(u({},e),((n={})[t.key]=r,n))},{}))},[n]),c.default.createElement(f.Modal,{title:t("common:search.batch"),visible:n,onCancel:function(){return r(!1)},footer:[c.default.createElement(f.Button,{key:"reset",onClick:function(){o.resetFields(),r(!0,o.getFieldsValue())}},t("common:reset")),c.default.createElement(f.Button,{key:"cancel",onClick:function(){return r(!1)}},t("common:cancel")),c.default.createElement(f.Button,{key:"ok",type:"primary",onClick:function(){var a=o.getFieldsValue(),e=Object.keys(a).reduce(function(e,t){var n,r=a[t];return s.isUndefined(r)?e:(r=r.trim().replace(/(\r\n)|(\n)/g,",").replace(/,,/g,","),u(u({},e),((n={})[t]=r,n)))},{});r(!0,e)}},t("common:search.label"))]},c.default.createElement(f.Form,{form:o},c.default.createElement(f.Tabs,{defaultActiveKey:"order_ids",tabPosition:"left",tabBarGutter:0,size:"small"},i.map(function(e){return c.default.createElement(f.Tabs.TabPane,{key:e.key,tab:c.default.createElement("span",{style:{width:"100px"}},e.label)},c.default.createElement(f.Form.Item,{name:e.key,className:"full-width"},c.default.createElement(f.Input.TextArea,{placeholder:t("common:search.batch_tip"),rows:8})))}))))}},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersReview=t.SearchForm=t.TopSearch=void 0;var l=a(n(8)),i=n(0);t.TopSearch=l.default.div(r(["\n  position: relative;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  align-items: center;\n  .pull-left {\n    flex-flow: row wrap;\n    align-items: center;\n  }\n  .mb-10 {\n    margin-bottom: 10px;\n  }\n  .ant-btn,\n  .ant-btn .iconfont {\n    font-size: 13px;\n  }\n  .ant-btn-icon-only {\n    font-size: 14px;\n  }\n  .ant-btn:not(.ant-btn-icon-only) {\n    padding: 0px 10px;\n  }\n"],["\n  position: relative;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  align-items: center;\n  .pull-left {\n    flex-flow: row wrap;\n    align-items: center;\n  }\n  .mb-10 {\n    margin-bottom: 10px;\n  }\n  .ant-btn,\n  .ant-btn .iconfont {\n    font-size: 13px;\n  }\n  .ant-btn-icon-only {\n    font-size: 14px;\n  }\n  .ant-btn:not(.ant-btn-icon-only) {\n    padding: 0px 10px;\n  }\n"])),t.SearchForm=l.default(i.Form)(r(["\n  display: flex;\n  margin-bottom: 10px;\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n\n  &[class^='ant-'] {\n    border-radius: 0 !important;\n  }\n\n  .ant-form-item.mult [class^='ant-'] {\n    border-left: none;\n  }\n"],["\n  display: flex;\n  margin-bottom: 10px;\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n\n  &[class^='ant-'] {\n    border-radius: 0 !important;\n  }\n\n  .ant-form-item.mult [class^='ant-'] {\n    border-left: none;\n  }\n"])),t.FiltersReview=l.default.div(r(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #999;\n  margin-bottom: 10px;\n  padding: 0.5em;\n  font-size: 12px;\n  .tag-item {\n    border: 1px solid #ddd;\n    padding: 2px 5px;\n    background: #fefefe;\n    margin-right: 1em;\n  }\n\n  .tag-item:hover {\n    color: #36cfc9;\n  }\n\n  .tag-item .item-icon {\n    cursor: pointer;\n    margin-left: 5px;\n  }\n  .tag-item .item-icon:hover {\n    color: red;\n  }\n\n  .val {\n    display: inline-block;\n    max-width: 300px;\n    overflow: hidden;\n    vertical-align: bottom;\n    text-overflow: ellipsis;\n  }\n"],["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #999;\n  margin-bottom: 10px;\n  padding: 0.5em;\n  font-size: 12px;\n  .tag-item {\n    border: 1px solid #ddd;\n    padding: 2px 5px;\n    background: #fefefe;\n    margin-right: 1em;\n  }\n\n  .tag-item:hover {\n    color: #36cfc9;\n  }\n\n  .tag-item .item-icon {\n    cursor: pointer;\n    margin-left: 5px;\n  }\n  .tag-item .item-icon:hover {\n    color: red;\n  }\n\n  .val {\n    display: inline-block;\n    max-width: 300px;\n    overflow: hidden;\n    vertical-align: bottom;\n    text-overflow: ellipsis;\n  }\n"]))},function(e,t){e.exports=o},function(e,t){e.exports=u}],c.c=f,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c(c.s=3);function c(e){if(f[e])return f[e].exports;var t=f[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}var s,f});