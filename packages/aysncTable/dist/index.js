!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("lodash"),require("@gui/request"),require("antd")):"function"==typeof define&&define.amd?define("ANTD_BASE_MODULE",["react","lodash","@gui/request","antd"],t):"object"==typeof exports?exports.ANTD_BASE_MODULE=t(require("react"),require("lodash"),require("@gui/request"),require("antd")):e.ANTD_BASE_MODULE=t(e.React,e._,e["@gui/request"],e.Antd)}(this,function(n,r,i,o){return l={},u.m=a=[function(e,t,n){"use strict";var V=this&&this.__assign||function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},W=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},X=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)r[i]=o[u];return r};Object.defineProperty(t,"__esModule",{value:!0});var Y,Z=o(n(1)),$=n(2),ee=n(3),te=n(4);function ne(e){return $.omitBy(e,function(e){return $.isNull(e)||$.isUndefined(e)})}t.default=function(e){var t,n,r,i=e.t,o=e.apiMethod,u=void 0===o?"GET":o,a=e.apiUrl,l=e.params,c=e.listName,f=void 0===c?"results":c,s=e.uniqueKey,d=void 0===s?"id":s,p=e.toggleRefresh,g=void 0!==p&&p,y=e.initTableHeaderParams,v=e.options,h=void 0===v?{currentKey:"index",pagesizeKey:"limit",totalKey:"total"}:v,b=e.refreshTableCurrentPageDataProps,O=e.defaultPagination,m=e.selectionChange,S=e.confs,_=void 0===S?{size:"middle",hidePagination:!1}:S,j=e.myRef,P=e.callbackFn,x=_.hidePagination,K=W(_,["hidePagination"]),T={simple:!1,current:1,showSizeChanger:!0,total:0,showTotal:function(e){return i("common:paginationTotalText",{total:e})},pageSize:10,pageSizeOptions:[10,20,50,100],position:["bottomCenter","bottomCenter"]},q=Z.useState(V(V({sortField:null,sortOrder:null},y),x?{}:((t={})[h.currentKey]=T.current,t[h.pagesizeKey]=T.pageSize,t))),z=q[0],w=q[1],E=Z.useState(V(V(V({},T),((n={})[h.currentKey]=T.current,n[h.pagesizeKey]=T.pageSize,n)),O)),D=E[0],M=E[1],A=Z.useState([]),N=A[0],C=A[1],R=Z.useState([]),U=R[0],B=R[1],J=Z.useState([]),k=J[0],F=J[1],L=Z.useState(l),H=L[0],I=L[1];var G=ee.useRequest(a,{axiosOptions:((r={})["POST"===u?"data":"params"]=ne(V(V({},H),z)),r.method=u,r.withCredentials=!0,r),trigger:V(V(V({},H),z),{toggleRefresh:g}),forceDispatchEffect:function(){return Y&&clearTimeout(Y),!0},onData:function(e){var t,n,r,i=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.data)&&void 0!==n?n:e;i&&(x||M(V(V({},D),{current:+i[h.currentKey],pageSize:+i[h.pagesizeKey],total:i.total})),r=f?i[f]:i,(b?function t(r){var n=b.reqUrl,i=b.paramsKey,o=b.conditions,u=b.searchKey;C(r);var a=r.filter(function(e){return o(e)});a.length&&(Y=setTimeout(function(){var e;ee.get(n,((e={})[null!=u?u:i]=a.map(function(e){return e[i]}).join(","),e)).then(function(n){t(r.map(function(t){var e=n.find(function(e){return e[i]===t[i]});return e?V(V({},t),e):t}))})},5e3))}:C)(r),P&&P())}}).loading;Z.useEffect(function(){var e;JSON.stringify(H||"")!==JSON.stringify(l||"")&&(w(V(V({},z),x?{}:((e={})[h.currentKey]=1,e))),I(l))},[l]);function Q(e,t){B(e),F(t),null!=m&&m.fn(e,t)}return Z.useEffect(function(){return Y&&clearTimeout(Y)},[]),j&&Z.useImperativeHandle(j,function(){return{getQuerys:function(){return z},getTableData:function(){return{dataSource:N,total:null==D?void 0:D.total}}}}),Z.default.createElement(te.Table,V({},K,{loading:G,pagination:!x&&D,dataSource:N,onChange:function(e,r,t){var n,i=Object.assign(z);(x||(null==e?void 0:e.current)===D.current)&&(null==e?void 0:e.pageSize)===D.pageSize||(i=ne(V(V({},i),((n={})[h.currentKey]=null==e?void 0:e.current,n[h.pagesizeKey]=null==e?void 0:e.pageSize,n)))),r&&(i=ne(V(V({},i),Object.keys(r).reduce(function(e,t){var n;return V(V({},e),((n={})[t]=$.isArray(r[t])?r[t].join(","):r[t],n))},{})))),t&&(i=ne(V(V({},i),{sortField:t.field,sortOrder:t.order}))),JSON.stringify(i)!==JSON.stringify(z)&&w(i)},rowKey:function(e){return e[d]},rowSelection:m?V(V({selectedRowKeys:U,onChange:function(e,t){var n=N.map(function(e){return e[d]}),r=U.filter(function(e){return!n.includes(e)}),i=k.filter(function(e){return!n.includes(e[d])});Q(X(e,r),X(t,i))}},(null==m?void 0:m.props)||{}),{selections:(null==U?void 0:U.length)&&[{key:"cancel",text:"取消全部选中",onSelect:function(){Q([],[])}}]}):_.rowSelection||null}))}},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=o}],u.c=l,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=0);function u(e){if(l[e])return l[e].exports;var t=l[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}var a,l});